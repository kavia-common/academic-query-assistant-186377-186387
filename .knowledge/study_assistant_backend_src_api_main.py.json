{"is_source_file": true, "format": "Python", "description": "This file defines the backend API for an academic query assistant. It includes FastAPI endpoints for health checks, session creation, chat interactions with AI, and retrieving chat history. It handles session management, input validation, and communicates with an AI client to generate responses.", "external_files": ["./config", "./deps", "./schemas", "./services/openai_client", "./services/session_store"], "external_methods": ["get_settings", "get_session_store", "ChatRequest.model_validate", "get_ai_client"], "published": ["app"], "classes": [], "methods": [{"name": "Tuple[str,bool] _ensure_session_id(header_session_id: Optional[str])", "description": "Ensures a session ID is present; generates a new UUID if missing or blank.", "scope": "", "scopeKind": ""}, {"name": "Optional[str] _validate_question(text: str)", "description": "Performs heuristic validation on user questions, checking length and character content.", "scope": "", "scopeKind": ""}, {"name": "List[ChatMessage] _history_to_messages(history: List[dict])", "description": "Converts stored message history dicts into AI client message format.", "scope": "", "scopeKind": ""}, {"name": "ChatResponse chat( payload: dict, response: Response, x_session_id: Optional[str] = Header(default=None, alias=\"X-Session-Id\"), store: InMemorySessionStore = Depends(get_session_store), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "dict create_session()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "HistoryResponse get_history( response: Response, x_session_id: Optional[str] = Header(default=None, alias=\"X-Session-Id\"), store: InMemorySessionStore = Depends(get_session_store), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "health_check()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["get_settings", "get_session_store", "ChatRequest.model_validate", "get_ai_client"], "search-terms": ["FastAPI", "session management", "chat endpoint", "AI interaction", "InMemorySessionStore", "Health check endpoint", "ChatResponse", "HistoryResponse", "X-Session-Id header"], "state": 2, "file_id": 2, "knowledge_revision": 22, "git_revision": "20d3da011ff0beadda17df0177f4951415fbb890", "revision_history": [{"9": "635d1b304f05b294535f5b9aeb1db1b143057fe8"}, {"16": "05758792f7148e9fec3292e373fa11173032f9a3"}, {"21": "05758792f7148e9fec3292e373fa11173032f9a3"}, {"22": "20d3da011ff0beadda17df0177f4951415fbb890"}], "ctags": [{"_type": "tag", "name": "_ensure_session_id", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/main.py", "pattern": "/^def _ensure_session_id(header_session_id: Optional[str]) -> Tuple[str, bool]:$/", "language": "Python", "typeref": "typename:Tuple[str,bool]", "kind": "function", "signature": "(header_session_id: Optional[str])"}, {"_type": "tag", "name": "_history_to_messages", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/main.py", "pattern": "/^def _history_to_messages(history: List[dict]) -> List[ChatMessage]:$/", "language": "Python", "typeref": "typename:List[ChatMessage]", "kind": "function", "signature": "(history: List[dict])"}, {"_type": "tag", "name": "_validate_question", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/main.py", "pattern": "/^def _validate_question(text: str) -> Optional[str]:$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "function", "signature": "(text: str)"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "chat", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/main.py", "pattern": "/^def chat($/", "language": "Python", "typeref": "typename:ChatResponse", "kind": "function", "signature": "( payload: dict, response: Response, x_session_id: Optional[str] = Header(default=None, alias=\"X-Session-Id\"), store: InMemorySessionStore = Depends(get_session_store), )"}, {"_type": "tag", "name": "create_session", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/main.py", "pattern": "/^def create_session() -> dict:$/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_history", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/main.py", "pattern": "/^def get_history($/", "language": "Python", "typeref": "typename:HistoryResponse", "kind": "function", "signature": "( response: Response, x_session_id: Optional[str] = Header(default=None, alias=\"X-Session-Id\"), store: InMemorySessionStore = Depends(get_session_store), )"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}], "hash": "1cff52aba55a64ffee9a77fe2a8c79e0", "format-version": 4, "code-base-name": "study_assistant_backend", "filename": "study_assistant_backend/src/api/main.py", "fields": [{"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}]}