{"is_source_file": true, "format": "Python", "description": "Main API server implementation using FastAPI for the Academic Query Assistant backend. It includes endpoints for health check, session management, chat interactions, and history retrieval, along with associated validation, session handling, and integration with AI services.", "external_files": ["./config", "./deps", "./schemas", "./services/openai_client", "./services/session_store"], "external_methods": ["get_settings", "get_session_store", "ChatRequest.model_validate", "get_ai_client"], "published": ["/", "/session", "/chat", "/history"], "classes": [], "methods": [{"name": "health_check()", "description": "Health check endpoint to verify the service is operational.", "scope": "", "scopeKind": ""}, {"name": "dict create_session()", "description": "Creates and returns a new unique session ID for chat sessions.", "scope": "", "scopeKind": ""}, {"name": "Optional[str] _validate_question(text: str)", "description": "Performs heuristic validation on the input question string.", "scope": "", "scopeKind": ""}, {"name": "List[ChatMessage] _history_to_messages(history: List[dict])", "description": "Converts stored message history to AI client message format.", "scope": "", "scopeKind": ""}, {"name": "ChatResponse chat( payload: dict, response: Response, x_session_id: Optional[str] = Header(default=None, alias=\"X-Session-Id\"), store: InMemorySessionStore = Depends(get_session_store), )", "description": "Handles user questions, validates input, fetches chat history, interacts with AI client, and returns the answer.", "scope": "", "scopeKind": ""}, {"name": "HistoryResponse get_history( response: Response, x_session_id: Optional[str] = Header(default=None, alias=\"X-Session-Id\"), store: InMemorySessionStore = Depends(get_session_store), )", "description": "Retrieves chat message history for a given session.", "scope": "", "scopeKind": ""}, {"name": "Tuple[str,bool] _ensure_session_id(header_session_id: Optional[str])", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["get_ai_client.chat", "get_settings.openai_model", "store.append_message", "store.get_history"], "search-terms": ["FastAPI", "Academic Query Assistant", "session management", "chat endpoint", "history retrieval", "AI chat"], "state": 2, "file_id": 2, "knowledge_revision": 21, "git_revision": "05758792f7148e9fec3292e373fa11173032f9a3", "revision_history": [{"9": "635d1b304f05b294535f5b9aeb1db1b143057fe8"}, {"16": "05758792f7148e9fec3292e373fa11173032f9a3"}, {"21": "05758792f7148e9fec3292e373fa11173032f9a3"}], "ctags": [{"_type": "tag", "name": "_ensure_session_id", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/main.py", "pattern": "/^def _ensure_session_id(header_session_id: Optional[str]) -> Tuple[str, bool]:$/", "language": "Python", "typeref": "typename:Tuple[str,bool]", "kind": "function", "signature": "(header_session_id: Optional[str])"}, {"_type": "tag", "name": "_history_to_messages", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/main.py", "pattern": "/^def _history_to_messages(history: List[dict]) -> List[ChatMessage]:$/", "language": "Python", "typeref": "typename:List[ChatMessage]", "kind": "function", "signature": "(history: List[dict])"}, {"_type": "tag", "name": "_validate_question", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/main.py", "pattern": "/^def _validate_question(text: str) -> Optional[str]:$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "function", "signature": "(text: str)"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "chat", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/main.py", "pattern": "/^def chat($/", "language": "Python", "typeref": "typename:ChatResponse", "kind": "function", "signature": "( payload: dict, response: Response, x_session_id: Optional[str] = Header(default=None, alias=\"X-Session-Id\"), store: InMemorySessionStore = Depends(get_session_store), )"}, {"_type": "tag", "name": "create_session", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/main.py", "pattern": "/^def create_session() -> dict:$/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_history", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/main.py", "pattern": "/^def get_history($/", "language": "Python", "typeref": "typename:HistoryResponse", "kind": "function", "signature": "( response: Response, x_session_id: Optional[str] = Header(default=None, alias=\"X-Session-Id\"), store: InMemorySessionStore = Depends(get_session_store), )"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}], "hash": "2455f4654db4ee0c1516103e2033a10c", "format-version": 4, "code-base-name": "study_assistant_backend", "filename": "study_assistant_backend/src/api/main.py", "fields": [{"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}]}