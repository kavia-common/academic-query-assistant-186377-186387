{"is_source_file": true, "format": "Python", "description": "This source file implements a client interface for interacting with OpenAI's API, including a protocol definition, mock implementations, and a factory function to create appropriate client instances based on configuration.", "external_files": ["..config"], "external_methods": ["get_settings"], "published": ["get_ai_client", "AIClient"], "classes": [{"name": "ChatMessage", "description": "TypedDict representing a message in a chat, including role and content."}, {"name": "AIClient", "description": "Protocol defining the interface that AI client implementations must follow, including the 'chat' method."}, {"name": "_MockAIClient", "description": "Mock implementation of the AIClient protocol for testing purposes, generating predictable responses."}, {"name": "_OpenAIClient", "description": "Real implementation wrapping the openai SDK for actual API calls, with error handling and message normalization."}], "methods": [{"name": "str chat(self, messages: List[ChatMessage], model: Optional[str] = None)", "description": "Method in AIClient protocol to send messages and receive a response from the AI model.", "scope": "_OpenAIClient", "scopeKind": "class"}, {"name": "str _summarize_user_question(self, messages: List[ChatMessage])", "description": "Helper in _MockAIClient to create a short summary of the latest user message.", "scope": "_MockAIClient", "scopeKind": "class"}, {"name": "AIClient get_ai_client()", "description": "Factory function that returns either a real or mock AI client based on configuration.", "scope": "", "scopeKind": ""}, {"name": "None __init__(self, api_key: str, base_url: Optional[str])", "scope": "_OpenAIClient", "scopeKind": "class", "description": "unavailable"}, {"name": "None __init__(self, seed: str)", "scope": "_MockAIClient", "scopeKind": "class", "description": "unavailable"}, {"name": "List[Dict[str,str]] _convert_messages(self, messages: List[ChatMessage])", "scope": "_OpenAIClient", "scopeKind": "class", "description": "unavailable"}], "calls": ["get_settings()", "_OpenAIClient.__init__", "_OpenAIClient.chat", "_MockAIClient.chat"], "search-terms": ["openai_client", "AIClient", "MockAIClient", "OpenAI SDK wrapper", "chat message", "chat interface", "OpenAI API", "mock response", "configuration-based client", "get_ai_client"], "state": 2, "file_id": 9, "knowledge_revision": 20, "git_revision": "8e07b34681ba41e9c4ae008af1c3bfaf66e8c4eb", "ctags": [{"_type": "tag", "name": "AIClient", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/services/openai_client.py", "pattern": "/^class AIClient(Protocol):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ChatMessage", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/services/openai_client.py", "pattern": "/^class ChatMessage(TypedDict):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_MockAIClient", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/services/openai_client.py", "pattern": "/^class _MockAIClient:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_OpenAIClient", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/services/openai_client.py", "pattern": "/^class _OpenAIClient:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/services/openai_client.py", "pattern": "/^    def __init__(self, api_key: str, base_url: Optional[str]) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, api_key: str, base_url: Optional[str])", "scope": "_OpenAIClient", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/services/openai_client.py", "pattern": "/^    def __init__(self, seed: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, seed: str)", "scope": "_MockAIClient", "scopeKind": "class"}, {"_type": "tag", "name": "_convert_messages", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/services/openai_client.py", "pattern": "/^    def _convert_messages(self, messages: List[ChatMessage]) -> List[Dict[str, str]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,str]]", "kind": "member", "signature": "(self, messages: List[ChatMessage])", "scope": "_OpenAIClient", "scopeKind": "class"}, {"_type": "tag", "name": "_summarize_user_question", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/services/openai_client.py", "pattern": "/^    def _summarize_user_question(self, messages: List[ChatMessage]) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, messages: List[ChatMessage])", "scope": "_MockAIClient", "scopeKind": "class"}, {"_type": "tag", "name": "chat", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/services/openai_client.py", "pattern": "/^    def chat(self, messages: List[ChatMessage], model: Optional[str] = None) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, messages: List[ChatMessage], model: Optional[str] = None)", "scope": "AIClient", "scopeKind": "class"}, {"_type": "tag", "name": "chat", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/services/openai_client.py", "pattern": "/^    def chat(self, messages: List[ChatMessage], model: Optional[str] = None) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, messages: List[ChatMessage], model: Optional[str] = None)", "scope": "_MockAIClient", "scopeKind": "class"}, {"_type": "tag", "name": "chat", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/services/openai_client.py", "pattern": "/^    def chat(self, messages: List[ChatMessage], model: Optional[str] = None) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, messages: List[ChatMessage], model: Optional[str] = None)", "scope": "_OpenAIClient", "scopeKind": "class"}, {"_type": "tag", "name": "get_ai_client", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/src/api/services/openai_client.py", "pattern": "/^def get_ai_client() -> AIClient:$/", "language": "Python", "typeref": "typename:AIClient", "kind": "function", "signature": "()"}], "hash": "78f3376dc5bc5c0b9360389ec7f126e1", "format-version": 4, "code-base-name": "study_assistant_backend", "filename": "study_assistant_backend/src/api/services/openai_client.py", "revision_history": [{"20": "8e07b34681ba41e9c4ae008af1c3bfaf66e8c4eb"}]}