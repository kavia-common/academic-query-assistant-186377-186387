{"is_source_file": true, "format": "Python", "description": "This is a test suite for the API endpoints of a FastAPI application, testing health checks, session management, chat validation, chat responses, history retrieval, and error handling.", "external_files": ["src.api.main"], "external_methods": ["os.environ", "uuid.UUID", "pytest.fixture", "pytest.mark.parametrize", "TestClient"], "published": ["client"], "classes": [], "methods": [{"name": "client()", "description": "Fixture creating a test client for the FastAPI app, ensuring environment setup for tests.", "scope": "", "scopeKind": ""}, {"name": "test_health_check_ok(client: TestClient)", "description": "Tests that the health check endpoint returns a 200 status and expected message.", "scope": "", "scopeKind": ""}, {"name": "test_session_get_returns_uuid(client: TestClient)", "description": "Verifies that the session creation endpoint returns a valid UUID.", "scope": "", "scopeKind": ""}, {"name": "test_chat_validation_errors(client: TestClient, question: str, expected_msg_fragment: str)", "description": "Tests validation error responses for invalid chat questions.", "scope": "", "scopeKind": ""}, {"name": "test_chat_success_with_auto_created_session_and_mock_ai(client: TestClient)", "description": "Tests successful chat interaction with session auto-creation and mock AI response.", "scope": "", "scopeKind": ""}, {"name": "test_history_returns_messages_for_session(client: TestClient)", "description": "Verifies retrieval of message history for a session, including correct message structure.", "scope": "", "scopeKind": ""}, {"name": "test_openai_error_results_in_502(client: TestClient)", "description": "Simulates an upstream AI error to verify proper error handling and 502 response.", "scope": "", "scopeKind": ""}, {"name": "str chat(self, messages, model: Optional[str] = None)", "scope": "test_openai_error_results_in_502.DummyAIClient", "scopeKind": "class", "description": "unavailable"}], "calls": ["os.environ.__delitem__", "TestClient(app).get", "uuid.UUID", "client.get", "client.post", "client.get", "client.post", "client.get", "client.post", "client.get"], "search-terms": ["test_api_endpoints", "FastAPI", "pytest", "session", "chat", "history", "health check", "mock AI", "X-Session-Id"], "state": 2, "file_id": 10, "knowledge_revision": 24, "git_revision": "", "ctags": [{"_type": "tag", "name": "DummyAIClient", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/tests/test_api_endpoints.py", "pattern": "/^    class DummyAIClient:$/", "file": true, "language": "Python", "kind": "class", "scope": "test_openai_error_results_in_502", "scopeKind": "function"}, {"_type": "tag", "name": "chat", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/tests/test_api_endpoints.py", "pattern": "/^        def chat(self, messages, model: Optional[str] = None) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, messages, model: Optional[str] = None)", "scope": "test_openai_error_results_in_502.DummyAIClient", "scopeKind": "class"}, {"_type": "tag", "name": "client", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/tests/test_api_endpoints.py", "pattern": "/^def client():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_chat_success_with_auto_created_session_and_mock_ai", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/tests/test_api_endpoints.py", "pattern": "/^def test_chat_success_with_auto_created_session_and_mock_ai(client: TestClient):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient)"}, {"_type": "tag", "name": "test_chat_validation_errors", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/tests/test_api_endpoints.py", "pattern": "/^def test_chat_validation_errors(client: TestClient, question: str, expected_msg_fragment: str):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient, question: str, expected_msg_fragment: str)"}, {"_type": "tag", "name": "test_health_check_ok", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/tests/test_api_endpoints.py", "pattern": "/^def test_health_check_ok(client: TestClient):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient)"}, {"_type": "tag", "name": "test_history_returns_messages_for_session", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/tests/test_api_endpoints.py", "pattern": "/^def test_history_returns_messages_for_session(client: TestClient):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient)"}, {"_type": "tag", "name": "test_openai_error_results_in_502", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/tests/test_api_endpoints.py", "pattern": "/^def test_openai_error_results_in_502(client: TestClient):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient)"}, {"_type": "tag", "name": "test_session_get_returns_uuid", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/tests/test_api_endpoints.py", "pattern": "/^def test_session_get_returns_uuid(client: TestClient):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient)"}], "hash": "e162687070667adff29cf88d7919990c", "format-version": 4, "code-base-name": "study_assistant_backend", "filename": "study_assistant_backend/tests/test_api_endpoints.py", "revision_history": [{"24": ""}]}