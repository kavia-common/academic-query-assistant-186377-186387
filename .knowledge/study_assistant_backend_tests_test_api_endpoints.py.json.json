{"is_source_file": true, "format": "Python", "description": "This is a test script for API endpoints of a FastAPI application, testing health check, session management, chat validation, chat responses, history retrieval, and error handling.", "external_files": ["src.api.main"], "external_methods": ["fastapi.testclient.TestClient", "pytest.fixture", "pytest.mark.parametrize", "os.environ", "uuid.UUID", "src.api.services.openai_client.get_ai_client"], "published": [], "classes": [], "methods": [{"name": "client()", "description": "Fixture that creates a TestClient instance for testing the FastAPI app.", "scope": "", "scopeKind": ""}, {"name": "test_health_check_ok(client: TestClient)", "description": "Tests the health check endpoint returning status 200 and the message 'Healthy'.", "scope": "", "scopeKind": ""}, {"name": "test_session_get_returns_uuid(client: TestClient)", "description": "Tests the /session GET endpoint returning a valid UUID as session ID.", "scope": "", "scopeKind": ""}, {"name": "test_chat_validation_errors(client: TestClient, question: str, expected_msg_fragment: str)", "description": "Tests validation errors for different invalid questions submitted to /chat POST endpoint.", "scope": "", "scopeKind": ""}, {"name": "test_chat_success_with_auto_created_session_and_mock_ai(client: TestClient)", "description": "Tests successful chat interaction, auto-creation of session, and response format with mock AI.", "scope": "", "scopeKind": ""}, {"name": "test_history_returns_messages_for_session(client: TestClient)", "description": "Verifies retrieval of message history for a session after a chat turn.", "scope": "", "scopeKind": ""}, {"name": "test_openai_error_results_in_502(client: TestClient)", "description": "Simulates an error from the AI client to ensure the API responds with 502 status.", "scope": "", "scopeKind": ""}, {"name": "str chat(self, messages, model: Optional[str] = None)", "scope": "test_openai_error_results_in_502.DummyAIClient", "scopeKind": "class", "description": "unavailable"}], "calls": ["client.get", "client.post", "client.headers.get", "uuid.UUID", "patch"], "search-terms": ["test_api_endpoints", "FastAPI", "session management", "/chat", "/history", "Mock AI", "API validation", "unit tests", "pytest"], "state": 2, "file_id": 10, "knowledge_revision": 26, "git_revision": "0a8fa87b20fb268b8939fa3d0689d52aad352ef8", "revision_history": [{"24": ""}, {"26": "0a8fa87b20fb268b8939fa3d0689d52aad352ef8"}], "ctags": [{"_type": "tag", "name": "DummyAIClient", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/tests/test_api_endpoints.py", "pattern": "/^    class DummyAIClient:$/", "file": true, "language": "Python", "kind": "class", "scope": "test_openai_error_results_in_502", "scopeKind": "function"}, {"_type": "tag", "name": "chat", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/tests/test_api_endpoints.py", "pattern": "/^        def chat(self, messages, model: Optional[str] = None) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, messages, model: Optional[str] = None)", "scope": "test_openai_error_results_in_502.DummyAIClient", "scopeKind": "class"}, {"_type": "tag", "name": "client", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/tests/test_api_endpoints.py", "pattern": "/^def client():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_chat_success_with_auto_created_session_and_mock_ai", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/tests/test_api_endpoints.py", "pattern": "/^def test_chat_success_with_auto_created_session_and_mock_ai(client: TestClient):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient)"}, {"_type": "tag", "name": "test_chat_validation_errors", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/tests/test_api_endpoints.py", "pattern": "/^def test_chat_validation_errors(client: TestClient, question: str, expected_msg_fragment: str):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient, question: str, expected_msg_fragment: str)"}, {"_type": "tag", "name": "test_health_check_ok", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/tests/test_api_endpoints.py", "pattern": "/^def test_health_check_ok(client: TestClient):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient)"}, {"_type": "tag", "name": "test_history_returns_messages_for_session", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/tests/test_api_endpoints.py", "pattern": "/^def test_history_returns_messages_for_session(client: TestClient):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient)"}, {"_type": "tag", "name": "test_openai_error_results_in_502", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/tests/test_api_endpoints.py", "pattern": "/^def test_openai_error_results_in_502(client: TestClient):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient)"}, {"_type": "tag", "name": "test_session_get_returns_uuid", "path": "/home/kavia/workspace/code-generation/academic-query-assistant-186377-186387/study_assistant_backend/tests/test_api_endpoints.py", "pattern": "/^def test_session_get_returns_uuid(client: TestClient):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient)"}], "hash": "e162687070667adff29cf88d7919990c", "format-version": 4, "code-base-name": "study_assistant_backend", "filename": "study_assistant_backend/tests/test_api_endpoints.py"}